<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>카테고리 목록</title>
    <!-- Bootstrap CSS 파일 추가 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <ul class="list-group">
        <li th:each="category : ${categories}" class="list-group-item">
            <div class="d-flex justify-content-between">
                <span th:text="${category.name}"></span>
                <button class="btn btn-sm btn-primary" onclick="toggleSubCategories(this)">
                    <i class="fa fa-chevron-down"></i>
                </button>
            </div>
            <ul class="list-group sub-category" th:if="${category.children != null and category.children.size() > 0}">
                <li th:each="child : ${category.children}" class="list-group-item">
                    <span th:text="${child.name}"></span>
                    <ul class="list-group sub-category" th:if="${child.children != null and child.children.size() > 0}">
                        <li th:each="grandchild : ${child.children}" class="list-group-item">
                            <span th:text="${grandchild.name}"></span>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div>

<!-- Bootstrap JavaScript 및 jQuery 추가 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    function toggleSubCategories(button) {
        var subCategories = button.parentElement.parentElement.nextElementSibling; // 다음 형제 요소 선택
        if (subCategories.style.display === "none" || subCategories.style.display === "") {
            subCategories.style.display = "block";
            button.innerHTML = '<i class="fa fa-chevron-up"></i>';
        } else {
            subCategories.style.display = "none";
            button.innerHTML = '<i class="fa fa-chevron-down"></i>';
        }
    }
</script>
</body>
</html>
